== General Goals
- Make the sessions independent form each other
- Find and overarching goal (fix a bug, add a feature) and compare different techniques how they help to achieve this goal.
- Provide a Why/Motivation/Business Goal for each iteration
- After each iteration we deleted the code like in any other coderetreat and swapped the pairs.

== Personal Preference for resolving static dependencies
. dependency Injection
.. Constructor / passed to the method under test
.. pure functions
.. setters
. Extend and override

== Sessions

=== Code Reading
https://blog.jbrains.ca/permalink/the-four-elements-of-simple-design[four elements of simple design]

=== Goldenmaster
- focus on the outputs
- only try to understand as much of the code to be able to run deterministic tests
- learning: this kind of tests can be setup without deep system / domain knowledge
=== Fix a bug
- there are overlaps with (Basic rules of refactoring)
- corrent -> correct
- Reproduce with system level test
- Isolate the area you want to change and write unit tests
- Write failing test that forces you to make the fix 
- Adjust failing tests Golden Master ?
- learning: Goldenmaster tests are a pain to maintain, you need your Domain Experts help to approve changes in the golden master output
      
=== New Feature: Write game progress to file
- inversion of Control (http://blog.adrianbolboaca.ro/2014/12/dependency-inversion/)
- Introduce Display/Console

=== Pure Functions
- extract functions that do not have side effects
- same arguments -> same result

=== Confine primitives
- Identify domain concepts that deserve there own class
- Best done inside out using introduce variables
- provide refactoring anchor and conversion methods
-- toPrimitive()
-- createDomainConceptFrom(primitive)
- new classes tend to attract functionality that is already there but feels to be in the wrong place
-- All those *Util classes are good candidates

=== Twist at the end
- Do not throw away your code, one of the pairs stays with the code the other one moves to somebody else
- Do fix a bug
- Boyscouts rule, clean up duplication
- Fight primitives

=== From Zero to system tests


=== The Boy Scout Rule
https://www.informit.com/articles/article.aspx?p=1235624&seqNum=6
https://cubscouts.org/wp-content/uploads/2015/04/Earth-Day-Scouts11.jpg

* Spot duplication
** The rule of three says that it is a good idea to extract these elements, with the purpose to minimize the duplication, only when you spot them three times.
*** duplication can be found in
*** magic constants
*** variables
*** code blocks
*** methods
*** classes
*** modules
*** names
*** ...
* extract methods with good names
* Get rid of or at least reduce the visible scope of local variables in methods


- http://blog.adrianbolboaca.ro/2015/02/refactoring-rule-of-three/
- Make the code you think is duplication look similar to validate that is actually the same code


=== Zero to System Tests
- Sandro: use the shortest flow through the methods for you first test, 2nd longest flow , ... Last on should be the deepest, because it needs the most data to setup

== Idea One
1. Goldenmaster
2. Fix a bug
   - learning: Goldenmaster tests are a pain to maintain, you need your Domain Experts help to approve changes in the golden master output  
3. New Feature: Write game progress to file
   

==  Idea Two
1. Start with bug fix
   - Goal: Understand the code
   - Goal: Write first tests to cover the code  
2. Goldenmaster
3. New Feature: Write game progress to file


== Previous legacy code retreats

=== 2nd One
JB facilitated the event like you could find in [here](http://legacycoderetreat.typepad.com/blog/2011/11/how-i-run-legacy-code-retreat.html), with a lot of details.

==== Sessions 
* free session
* Golden Masters
* Subclass to Test
* Replace Inheritance with Delegation
* Pure Functions


=== Brettencode
* http://legacycoderetreat.typepad.com/blog/2012/02/andreas-leidig-had-run-a-legacy-code-retreat-in-germany-recently-and-written-about-the-experience-at-httppboopwordpressc.html
* https://pboop.wordpress.com/2012/02/19/how-we-ran-our-legacy-code-retreat/
* http://blog.florian-hopf.de/2012/02/legacy-code-retreat.html

==== Sessions
1. Get to know the code
2. Goldenmaster
3. Subclass to test (not that good for trivia)
4. depends on 3, pass overridden methods as dependencies
5. Pure functions
6. ?
=== Feedback


=== Milan
* https://dzone.com/articles/legacy-code-retreat
* https://www.slideshare.net/gabriele.lana/milano-legacy-coderetreat-2013

==== Sessions
1. Golden Master
2. Make it easy to add a new category of questions
3. add unit test for the roll function
4. find all the code smells and fix 3
5. remove all duplication
6. make the introduction of different penalty rules a one-line change (an Open/Closed Principle kata)


==== Feedback
The final retrospective brought out several goods:
* good format: each iteration is almost independent.
* Clearly defined goals.
* Variety of languages and people.
* Location and food (Talent Garden in Milan and breakfast offered by XPeppers).

And several bads too, to resolve for the next editions:
* no theoretical introduction on how to work with the legacy code.
* Difficulties in using Extract Class, with respect to Extract Method and Extract Field which are local changes.
* Difficulties in introducing unit-level tests.

=== London Codurance
* https://codurance.com/2017/11/05/legacy-code-retreat/
==== Sessions
1. Understanding the code
2. Golden Master
3. Extracting and Renaming pure functions
4. Simplifying Conditionals
5. Writing Unit Tests
6. Introducing a new feature
==== Feedback
N/A
